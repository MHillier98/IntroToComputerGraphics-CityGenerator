<html>

<head>
  <title>Simple Geometry Test</title>
</head>

<style>
  body {
    margin: 0;
  }

  canvas {
    width: 100%;
    height: 100%;
  }
</style>

<body>
  <!--include the three.js library-->
  <script src="js/three.js"> </script>
  <!--and the trackball code-->
  <script src="js/OrbitControls.js"> </script>

  <style>
    body {
      font-family: Monospace;
      background-color: #000;
      color: #fff;
      margin: 0px;
      overflow: hidden;
    }

    #info {
      position: absolute;
      top: 10px;
      width: 100%;
      text-align: center;
    }
  </style>

  <div id="info">
  </div>
  <script>

    //create the scene
    var scene = new THREE.Scene();
    var ratio = window.innerWidth / window.innerHeight;
    //create the perspective camera
    //for parameters see https://threejs.org/docs/#api/cameras/PerspectiveCamera
    var camera = new THREE.PerspectiveCamera(90, ratio, 0.1, 10000);

    //set the camera position
    camera.position.set(0, 0, 15);
    // and the direction
    camera.lookAt(0, 0, 1);

    //Skybox
    var skyboxGeometry = new THREE.CubeGeometry(10000, 10000, 10000);
    var skyboxMaterials =
      [
        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load("./assets/skybox/hills_ft.png"), side: THREE.DoubleSide }),
        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load("./assets/skybox/hills_bk.png"), side: THREE.DoubleSide }),
        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load("./assets/skybox/hills_up.png"), side: THREE.DoubleSide }),
        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load("./assets/skybox/hills_dn.png"), side: THREE.DoubleSide }),
        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load("./assets/skybox/hills_rt.png"), side: THREE.DoubleSide }),
        new THREE.MeshBasicMaterial({ map: new THREE.TextureLoader().load("./assets/skybox/hills_lt.png"), side: THREE.DoubleSide }),
      ];

    // var skyboxMaterial = new THREE.MeshBasicMaterial(skyboxMaterials);
    var skybox = new THREE.Mesh(skyboxGeometry, skyboxMaterials);


    //create the webgl renderer
    var renderer = new THREE.WebGLRenderer();

    //set the size of the rendering window
    renderer.setSize(window.innerWidth, window.innerHeight);

    //add the renderer to the current document
    document.body.appendChild(renderer.domElement);

    var ambientLight = new THREE.AmbientLight(0xFFFFFF, 0.3);


    function CreateScene() {
      scene.add(ambientLight);
      scene.add(skybox);
    }

    CreateScene();

    controls = new THREE.OrbitControls(camera, renderer.domElement);
    camera.position.z = 3;

    //Generator Logic
    var update = function () {
      controls.update();

    };

    var render = function () {
      //call the render with the scene and the camera
      renderer.render(scene, camera);
    }

    //this fucntion is called when the window is resized
    var MyResize = function () {
      var width = window.innerWidth;
      var height = window.innerHeight;
      renderer.setSize(width, height);
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      renderer.render(scene, camera);
    };

    //Runs the game loop
    var GameLoop = function () {

      update();
      console.log('run update loop');
      render();
      requestAnimationFrame(GameLoop);
    }



    requestAnimationFrame(GameLoop);
    //link the resize of the window to the update of the camera
    window.addEventListener('resize', MyResize);
  </script>
</body>
//Testing
</html>
